"use strict";(self["webpackChunkwebapp1"]=self["webpackChunkwebapp1"]||[]).push([[705],{2705:function(t,i,e){e.r(i),e.d(i,{default:function(){return l}});var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"contpage"},[e("div",{staticClass:"cont-bar"},[e("p",[t._v(t._s(t.title))]),e("img",{attrs:{src:t.urlImg,alt:""}})]),e("div",{staticClass:"topbar",domProps:{innerHTML:t._s(t.msg)}},[t._v(" "+t._s(t.msg)+" ")]),e("div",{staticClass:"fot"},[e("van-goods-action",{staticClass:"fot-son"},[e("van-goods-action-icon",{staticClass:"fot-son-box",attrs:{icon:"arrow-left",color:"#646566"},on:{click:t.goPre}}),e("div",{staticClass:"font-box"}),e("van-goods-action-icon",{staticClass:"fot-son-box",attrs:{icon:"chat-o",color:"#646566",badge:t.legs},on:{click:t.comment}}),e("van-goods-action-icon",{staticClass:"fot-son-box",attrs:{icon:"good-job-o",color:t.isNice?"#e4393c":"#646566",badge:t.popularity},on:{click:function(i){return t.niceProduct(t.niceStr)}}}),e("van-goods-action-icon",{staticClass:"fot-son-box",attrs:{icon:"like",color:t.isLike?"#e4393c":"#646566"},on:{click:function(i){return t.likeProduct(t.likeStr)}}}),e("van-goods-action-icon",{staticClass:"fot-son-box",attrs:{icon:"share-o",color:"#646566"},on:{click:t.share}})],1),e("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},on:{select:t.onSelect},model:{value:t.showShare,callback:function(i){t.showShare=i},expression:"showShare"}})],1)])},s=[],a=(e(8862),e(561),e(8309),{name:"contpage",data:function(){return{msg:"",urlImg:"",title:"",active:"",isLike:!1,isNice:!1,likeName:"",niceName:"",likeStr:{},niceStr:{},popularity:"",legs:"",showShare:!1,options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moments"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"},{name:"小程序码",icon:"weapp-qrcode"}]]}},created:function(){for(var t=this,i=JSON.parse(localStorage.getItem("like"))||[],e=JSON.parse(localStorage.getItem("nice"))||[],o=this.$route.params.id,s=0;s<i.length;s++)i[s].id===o&&(this.isLike=!0);for(var a=0;a<e.length;a++)e[a].id===o&&(this.isNice=!0);o||this.$router.go(-1),this.likeStr.id=o,this.niceStr.id=o,this.axios({method:"get",url:"https://apis.netstart.cn/zhihudaily/story/".concat(o)}).then((function(t){return t.data.story})).then((function(i){t.msg=i.body,t.urlImg=i.image,t.title=i.title,t.likeStr.urlImg=i.images[0],t.likeStr.title=i.title})).catch((function(t){})),this.axios({method:"get",url:"https://apis.netstart.cn/zhihudaily/story/".concat(o,"/extra")}).then((function(i){t.popularity=i.data.popularity,t.niceStr.num=i.data.popularity})).catch((function(t){})),this.axios({method:"get",url:"https://apis.netstart.cn/zhihudaily/story/".concat(o,"/short-comments")}).then((function(i){t.legs=i.data.comments.length})).catch((function(t){}))},methods:{goPre:function(){this.$router.push({name:"mymain"})},likeProduct:function(t){this.isLike=!this.isLike,this.likeName=this.isLike?"收藏成功":"取消收藏",this.$toast({message:this.likeName,position:"bottom"});var i=JSON.parse(localStorage.getItem("like"))||[];if(this.isLike){for(var e={id:t.id,imges:t.urlImg,title:t.title},o=0;o<i.length;o++)if(i[o].id===e.id)return;i.push(e),localStorage.setItem("like",JSON.stringify(i))}else{for(var s=0;s<i.length;s++)i[s].id===t.id&&i.splice(s,1);localStorage.setItem("like",JSON.stringify(i))}},comment:function(){var t=this.likeStr.id;this.$router.push({name:"commentpge",params:{id:t}})},share:function(){this.showShare=!0},onSelect:function(t){this.$toast(t.name),this.showShare=!1},niceProduct:function(t){this.isNice=!this.isNice;var i=JSON.parse(localStorage.getItem("nice"))||[];if(this.niceName=this.isNice?"点赞成功":"取消点赞",this.$toast({message:this.niceName,position:"bottom"}),this.isNice){this.popularity=this.popularity+1;for(var e={id:t.id,num:this.popularity},o=0;o<i.length;o++)if(i[o].id===e.id)return;i.push(e),localStorage.setItem("nice",JSON.stringify(i))}else{this.popularity=this.popularity-1;for(var s=0;s<i.length;s++)i[s].id===t.id&&i.splice(s,1);localStorage.setItem("nice",JSON.stringify(i))}}},mounted:function(){}}),n=a,c=e(1001),r=(0,c.Z)(n,o,s,!1,null,"189b8824",null),l=r.exports}}]);
//# sourceMappingURL=705-legacy.e2f41273.js.map