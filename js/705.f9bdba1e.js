"use strict";(self["webpackChunkwebapp1"]=self["webpackChunkwebapp1"]||[]).push([[705],{2705:function(t,i,e){e.r(i),e.d(i,{default:function(){return c}});var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"contpage"},[e("div",{staticClass:"cont-bar"},[e("p",[t._v(t._s(t.title))]),e("img",{attrs:{src:t.urlImg,alt:""}})]),e("div",{staticClass:"topbar",domProps:{innerHTML:t._s(t.msg)}},[t._v(" "+t._s(t.msg)+" ")]),e("div",{staticClass:"fot"},[e("van-goods-action",{staticClass:"fot-son"},[e("van-goods-action-icon",{staticClass:"fot-son-box",attrs:{icon:"arrow-left",color:"#646566"},on:{click:t.goPre}}),e("div",{staticClass:"font-box"}),e("van-goods-action-icon",{staticClass:"fot-son-box",attrs:{icon:"chat-o",color:"#646566",badge:t.legs},on:{click:t.comment}}),e("van-goods-action-icon",{staticClass:"fot-son-box",attrs:{icon:"good-job-o",color:t.isNice?"#e4393c":"#646566",badge:t.popularity},on:{click:function(i){return t.niceProduct(t.niceStr)}}}),e("van-goods-action-icon",{staticClass:"fot-son-box",attrs:{icon:"like",color:t.isLike?"#e4393c":"#646566"},on:{click:function(i){return t.likeProduct(t.likeStr)}}}),e("van-goods-action-icon",{staticClass:"fot-son-box",attrs:{icon:"share-o",color:"#646566"},on:{click:t.share}})],1),e("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},on:{select:t.onSelect},model:{value:t.showShare,callback:function(i){t.showShare=i},expression:"showShare"}})],1)])},o=[],a={name:"contpage",data(){return{msg:"",urlImg:"",title:"",active:"",isLike:!1,isNice:!1,likeName:"",niceName:"",likeStr:{},niceStr:{},popularity:"",legs:"",showShare:!1,options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moments"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"},{name:"小程序码",icon:"weapp-qrcode"}]]}},created(){let t=JSON.parse(localStorage.getItem("like"))||[],i=JSON.parse(localStorage.getItem("nice"))||[],e=this.$route.params.id;for(let s=0;s<t.length;s++)t[s].id===e&&(this.isLike=!0);for(let s=0;s<i.length;s++)i[s].id===e&&(this.isNice=!0);e||this.$router.go(-1),this.likeStr.id=e,this.niceStr.id=e,this.axios({method:"get",url:`https://apis.netstart.cn/zhihudaily/story/${e}`}).then((t=>t.data.story)).then((t=>{this.msg=t.body,this.urlImg=t.image,this.title=t.title,this.likeStr.urlImg=t.images[0],this.likeStr.title=t.title})).catch((t=>{})),this.axios({method:"get",url:`https://apis.netstart.cn/zhihudaily/story/${e}/extra`}).then((t=>{this.popularity=t.data.popularity,this.niceStr.num=t.data.popularity})).catch((t=>{})),this.axios({method:"get",url:`https://apis.netstart.cn/zhihudaily/story/${e}/short-comments`}).then((t=>{this.legs=t.data.comments.length})).catch((t=>{}))},methods:{goPre(){this.$router.push({name:"mymain"})},likeProduct(t){this.isLike=!this.isLike,this.likeName=this.isLike?"收藏成功":"取消收藏",this.$toast({message:this.likeName,position:"bottom"});let i=JSON.parse(localStorage.getItem("like"))||[];if(this.isLike){let e={id:t.id,imges:t.urlImg,title:t.title};for(let t=0;t<i.length;t++)if(i[t].id===e.id)return;i.push(e),localStorage.setItem("like",JSON.stringify(i))}else{for(let e=0;e<i.length;e++)i[e].id===t.id&&i.splice(e,1);localStorage.setItem("like",JSON.stringify(i))}},comment(){let t=this.likeStr.id;this.$router.push({name:"commentpge",params:{id:t}})},share(){this.showShare=!0},onSelect(t){this.$toast(t.name),this.showShare=!1},niceProduct(t){this.isNice=!this.isNice;let i=JSON.parse(localStorage.getItem("nice"))||[];if(this.niceName=this.isNice?"点赞成功":"取消点赞",this.$toast({message:this.niceName,position:"bottom"}),this.isNice){this.popularity=this.popularity+1;let e={id:t.id,num:this.popularity};for(let t=0;t<i.length;t++)if(i[t].id===e.id)return;i.push(e),localStorage.setItem("nice",JSON.stringify(i))}else{this.popularity=this.popularity-1;for(let e=0;e<i.length;e++)i[e].id===t.id&&i.splice(e,1);localStorage.setItem("nice",JSON.stringify(i))}}},mounted(){}},n=a,l=e(1001),r=(0,l.Z)(n,s,o,!1,null,"189b8824",null),c=r.exports}}]);
//# sourceMappingURL=705.f9bdba1e.js.map